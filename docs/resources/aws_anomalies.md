---
layout: ""
page_title: dynatrace_aws_anomalies Resource - terraform-provider-dynatrace"
subcategory: "Anomaly Detection"
description: |-
  The resource `dynatrace_aws_anomalies` covers configuration for AWS anomaly detection
---

# dynatrace_aws_anomalies (Resource)

-> This resource requires the API token scopes **Read settings** (`settings.read`) and **Write settings** (`settings.write`)

## Dynatrace Documentation

- Adjust the sensitivity of anomaly detection for infrastructure - https://www.dynatrace.com/support/help/platform/davis-ai/anomaly-detection/adjust-sensitivity-anomaly-detection/adjust-sensitivity-infastructure

- Settings API - https://www.dynatrace.com/support/help/dynatrace-api/environment-api/settings (schemaId: `builtin:anomaly-detection.infrastructure-aws`)

## Export Example Usage

- `terraform-provider-dynatrace -export dynatrace_aws_anomalies` downloads all existing AWS anomaly detection configuration

The full documentation of the export feature is available [here](https://dt-url.net/h203qmc).

## Resource Example Usage

```terraform
resource "dynatrace_aws_anomalies" "#name#" {
  ec_2_candidate_high_cpu_detection {
    enabled        = true
    detection_mode = "custom"
    custom_thresholds {
      cpu_usage = 94
    }
  }
  elb_high_connection_errors_detection {
    enabled        = true
    detection_mode = "custom"
    custom_thresholds {
      connection_errors_per_minute = 9
    }
  }
  lambda_high_error_rate_detection {
    enabled        = true
    detection_mode = "custom"
    custom_thresholds {
      failed_invocations_rate = 4
    }
  }
  rds_high_cpu_detection {
    enabled = false
  }
  rds_high_memory_detection {
    enabled        = true
    detection_mode = "custom"
    custom_thresholds {
      free_memory = 94
      swap_usage  = 4
    }
  }
  rds_high_write_read_latency_detection {
    enabled        = true
    detection_mode = "custom"
    custom_thresholds {
      read_write_latency = 194
    }
  }
  rds_low_storage_detection {
    enabled = false
  }
  rds_restarts_sequence_detection {
    enabled = false
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `ec_2_candidate_high_cpu_detection` (Block List, Min: 1, Max: 1) no documentation available (see [below for nested schema](#nestedblock--ec_2_candidate_high_cpu_detection))
- `elb_high_connection_errors_detection` (Block List, Min: 1, Max: 1) no documentation available (see [below for nested schema](#nestedblock--elb_high_connection_errors_detection))
- `lambda_high_error_rate_detection` (Block List, Min: 1, Max: 1) no documentation available (see [below for nested schema](#nestedblock--lambda_high_error_rate_detection))
- `rds_high_cpu_detection` (Block List, Min: 1, Max: 1) no documentation available (see [below for nested schema](#nestedblock--rds_high_cpu_detection))
- `rds_high_memory_detection` (Block List, Min: 1, Max: 1) no documentation available (see [below for nested schema](#nestedblock--rds_high_memory_detection))
- `rds_high_write_read_latency_detection` (Block List, Min: 1, Max: 1) no documentation available (see [below for nested schema](#nestedblock--rds_high_write_read_latency_detection))
- `rds_low_storage_detection` (Block List, Min: 1, Max: 1) no documentation available (see [below for nested schema](#nestedblock--rds_low_storage_detection))
- `rds_restarts_sequence_detection` (Block List, Min: 1, Max: 1) no documentation available (see [below for nested schema](#nestedblock--rds_restarts_sequence_detection))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--ec_2_candidate_high_cpu_detection"></a>
### Nested Schema for `ec_2_candidate_high_cpu_detection`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `custom_thresholds` (Block List, Max: 1) Alert if the condition is met in 3 out of 5 samples (see [below for nested schema](#nestedblock--ec_2_candidate_high_cpu_detection--custom_thresholds))
- `detection_mode` (String) Possible Values: `Auto`, `Custom`

<a id="nestedblock--ec_2_candidate_high_cpu_detection--custom_thresholds"></a>
### Nested Schema for `ec_2_candidate_high_cpu_detection.custom_thresholds`

Required:

- `cpu_usage` (Number) CPU usage is higher than



<a id="nestedblock--elb_high_connection_errors_detection"></a>
### Nested Schema for `elb_high_connection_errors_detection`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `custom_thresholds` (Block List, Max: 1) Alert if the condition is met in 3 out of 5 samples (see [below for nested schema](#nestedblock--elb_high_connection_errors_detection--custom_thresholds))
- `detection_mode` (String) Possible Values: `Auto`, `Custom`

<a id="nestedblock--elb_high_connection_errors_detection--custom_thresholds"></a>
### Nested Schema for `elb_high_connection_errors_detection.custom_thresholds`

Required:

- `connection_errors_per_minute` (Number) Number of backend connection errors is higher than



<a id="nestedblock--lambda_high_error_rate_detection"></a>
### Nested Schema for `lambda_high_error_rate_detection`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `custom_thresholds` (Block List, Max: 1) Alert if the condition is met in 3 out of 5 samples (see [below for nested schema](#nestedblock--lambda_high_error_rate_detection--custom_thresholds))
- `detection_mode` (String) Possible Values: `Auto`, `Custom`

<a id="nestedblock--lambda_high_error_rate_detection--custom_thresholds"></a>
### Nested Schema for `lambda_high_error_rate_detection.custom_thresholds`

Required:

- `failed_invocations_rate` (Number) Failed invocations rate is higher than



<a id="nestedblock--rds_high_cpu_detection"></a>
### Nested Schema for `rds_high_cpu_detection`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `custom_thresholds` (Block List, Max: 1) Alert if the condition is met in 3 out of 5 samples (see [below for nested schema](#nestedblock--rds_high_cpu_detection--custom_thresholds))
- `detection_mode` (String) Possible Values: `Auto`, `Custom`

<a id="nestedblock--rds_high_cpu_detection--custom_thresholds"></a>
### Nested Schema for `rds_high_cpu_detection.custom_thresholds`

Required:

- `cpu_usage` (Number) CPU usage is higher than



<a id="nestedblock--rds_high_memory_detection"></a>
### Nested Schema for `rds_high_memory_detection`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `custom_thresholds` (Block List, Max: 1) Alert if **both** conditions is met in 3 out of 5 samples (see [below for nested schema](#nestedblock--rds_high_memory_detection--custom_thresholds))
- `detection_mode` (String) Possible Values: `Auto`, `Custom`

<a id="nestedblock--rds_high_memory_detection--custom_thresholds"></a>
### Nested Schema for `rds_high_memory_detection.custom_thresholds`

Required:

- `free_memory` (Number) Freeable memory is lower than
- `swap_usage` (Number) Swap usage is higher than



<a id="nestedblock--rds_high_write_read_latency_detection"></a>
### Nested Schema for `rds_high_write_read_latency_detection`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `custom_thresholds` (Block List, Max: 1) Alert if the condition is met in 3 out of 5 samples (see [below for nested schema](#nestedblock--rds_high_write_read_latency_detection--custom_thresholds))
- `detection_mode` (String) Possible Values: `Auto`, `Custom`

<a id="nestedblock--rds_high_write_read_latency_detection--custom_thresholds"></a>
### Nested Schema for `rds_high_write_read_latency_detection.custom_thresholds`

Required:

- `read_write_latency` (Number) Read/write latency is higher than



<a id="nestedblock--rds_low_storage_detection"></a>
### Nested Schema for `rds_low_storage_detection`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `custom_thresholds` (Block List, Max: 1) Alert if the condition is met in 3 out of 5 samples (see [below for nested schema](#nestedblock--rds_low_storage_detection--custom_thresholds))
- `detection_mode` (String) Possible Values: `Auto`, `Custom`

<a id="nestedblock--rds_low_storage_detection--custom_thresholds"></a>
### Nested Schema for `rds_low_storage_detection.custom_thresholds`

Required:

- `free_storage_percentage` (Number) Free storage space divided by allocated storage is lower than



<a id="nestedblock--rds_restarts_sequence_detection"></a>
### Nested Schema for `rds_restarts_sequence_detection`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `custom_thresholds` (Block List, Max: 1) Alert if the condition is met in 2 out of 20 samples (see [below for nested schema](#nestedblock--rds_restarts_sequence_detection--custom_thresholds))
- `detection_mode` (String) Possible Values: `Auto`, `Custom`

<a id="nestedblock--rds_restarts_sequence_detection--custom_thresholds"></a>
### Nested Schema for `rds_restarts_sequence_detection.custom_thresholds`

Required:

- `restarts_per_minute` (Number) Number of restarts per minute is equal or higher than
 