---
layout: ""
page_title: "dynatrace_automation_workflow Resource - terraform-provider-dynatrace"
subcategory: "Automation"
description: |-
  The resource `dynatrace_automation_workflow` covers configuration of Workflows
---

# dynatrace_automation_workflow (Resource)

-> **Dynatrace SaaS only**

-> To utilize this resource, please define the environment variables `DT_CLIENT_ID`, `DT_CLIENT_SECRET`, `DT_ACCOUNT_ID` with an OAuth client including the following permissions: **View workflows** (`automation:workflows:read`) and **Create and edit workflows** (`automation:workflows:write`).

-> This resource is excluded by default in the export utility, please explicitly specify the resource to retrieve existing configuration.

## Dynatrace Documentation

- Dynatrace Workflows - https://www.dynatrace.com/support/help/platform-modules/cloud-automation/workflows

## Resource Example Usage

```terraform
resource "dynatrace_automation_workflow" "Sample_Worklow_TF" {
  description = "Desc"
  actor       = "########-####-####-####-############"
  title       = "Sample Worklow TF1"
  owner       = "########-####-####-####-############"
  private     = true
  tasks {
    task {
      name        = "http_request_1"
      description = "Issue an HTTP request to any API"
      action      = "dynatrace.automations:http-function"
      active      = true
      input = jsonencode({
        "method" : "GET",
        "url" : "https://www.google.at/"
      })
      position {
        x = 0
        y = 1
      }
    }
    task {
      name        = "http_request_2"
      description = "Issue an HTTP request to any API"
      action      = "dynatrace.automations:http-function"
      active      = false
      input = jsonencode({
        "method" : "GET",
        "url" : "https://www.second-task.com/"
      })
      conditions {
        states = {
          http_request_1   = "SUCCESS"
          run_javascript_1 = "OK"
        }
        custom = ""
      }
      position {
        x = -1
        y = 2
      }
      timeout = 50000
    }
    task {
      name        = "http_request_3"
      description = "Issue an HTTP request to any API"
      action      = "dynatrace.automations:http-function"
      active      = false
      input = jsonencode({
        "method" : "GET",
        "url" : "https://www.third-task.com"
      })
      conditions {
        states = {
          http_request_2 = "OK"
        }
        custom = "{{http_request_1}}"
      }
      position {
        x = 0
        y = 3
      }
    }
    task {
      name        = "run_javascript_1"
      description = "Build a custom task running js Code"
      action      = "dynatrace.automations:run-javascript"
      active      = false
      input = jsonencode({
        "script" : "// optional import of sdk modules\nimport { execution } from '@dynatrace-sdk/automation-utils';\n\nexport default async function ({ execution_id }) {\n  // your code goes here\n  // e.g. get the current execution\n  const ex = await execution(execution_id);\n  console.log('Automated script execution on behalf of', ex.trigger);\n  \n  return { triggeredBy: ex.trigger };\n}"
      })
      position {
        x = -2
        y = 1
      }
    }
  }
  trigger {
    event {
      active = false
      config {
        davis_event {
          entity_tags_match = "all"
          entity_tags = {
            asdf = ""
          }
          on_problem_close = false
          types            = ["CUSTOM_ANNOTATION"]
        }
      }
    }
  }
}
```


<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `tasks` (Block List, Min: 1, Max: 1) The tasks to run for every execution of this workflow (see [below for nested schema](#nestedblock--tasks))
- `title` (String) The title / name of the workflow

### Optional

- `actor` (String) The user context the executions of the workflow will happen with
- `description` (String) An optional description for the workflow
- `owner` (String) The ID of the owner of this workflow
- `private` (Boolean) Defines whether this workflow is private to the owner or not. Default is `true`
- `trigger` (Block List, Max: 1) Configures how executions of the workflows are getting triggered. If no trigger is specified it means the workflow is getting manually triggered (see [below for nested schema](#nestedblock--trigger))
- `type` (String) The type of the workflow. Possible values are `STANDARD` and `SIMPLE`. Defaults to `STANDARD`. Workflows of type `SIMPLE` are allowed to contain only one action

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--tasks"></a>
### Nested Schema for `tasks`

Optional:

- `task` (Block Set) TODO: No documentation available (see [below for nested schema](#nestedblock--tasks--task))

<a id="nestedblock--tasks--task"></a>
### Nested Schema for `tasks.task`

Required:

- `action` (String) Currently known and supported values are `dynatrace.automations:http-function`, `dynatrace.automations:run-javascript` and `dynatrace.automations:execute-dql-query`
- `name` (String) The name of the task

Optional:

- `active` (Boolean) Specifies whether a task should be skipped as a no operation or not
- `concurrency` (String) Required if `with_items` is specified. By default loops execute sequentially with concurrency set to 1. You can increase how often it runs in parallel
- `conditions` (Block List, Max: 1) Conditions that have to be met in order to execute that task (see [below for nested schema](#nestedblock--tasks--task--conditions))
- `description` (String) A description for this task
- `input` (String) Parameters and values for this task as JSON code. Contents depend on the kind of task - determined by the attribute `action`
- `position` (Block List, Max: 1) Layouting information about the task tile when visualized. If not specified Dynatrace will position the task tiles automatically (see [below for nested schema](#nestedblock--tasks--task--position))
- `retry` (Block List, Max: 1) Configure whether to automatically rerun the task on failure. If not specified no retries will be attempted (see [below for nested schema](#nestedblock--tasks--task--retry))
- `timeout` (String) Specifies a default task timeout in seconds. 15 * 60 (15min) is used when not set. Minimum 1. Maximum 604800
- `wait_before` (String) Specifies a default task wait before in seconds. 0 is used when not set
- `with_items` (String) Iterates over items in a list, allowing actions to be executed repeatedly. Example: Specifying `item in [1, 2, 3]` here will execute the task three times for the numbers 1, 2 and 3 - with the current number available for scripting using the expression `{{ _.item }}`

<a id="nestedblock--tasks--task--conditions"></a>
### Nested Schema for `tasks.task.conditions`

Optional:

- `custom` (String) A custom condition that needs to be met for the current task to get executed
- `else` (String) Possible values are `SKIP` and `STOP`
- `states` (Map of String) key/value pairs where the `key` is the name of another task and the value the status it needs to be for the current task to get executed. Possible values are `SUCCESS`, `ERROR`, `ANY`, `OK` (Success or Skipped) and `NOK` (Error or Cancelled)


<a id="nestedblock--tasks--task--position"></a>
### Nested Schema for `tasks.task.position`

Required:

- `x` (Number) x-coordinate for layouting
- `y` (Number) y-coordinate for layouting


<a id="nestedblock--tasks--task--retry"></a>
### Nested Schema for `tasks.task.retry`

Optional:

- `count` (String) Specifies a maximum number of times that a task can be repeated in case it fails on execution. You can specify either a number between 1 and 99 here or use an expression (`{{}}`). Default: 1
- `delay` (String) Specifies a delay in seconds between subsequent task retries. You can specify either a number between 1 and 3600 here or an expression (`{{...}}`). Default: 1
- `failed_loop_iterations_only` (Boolean) Specifies whether retrying the failed iterations or the whole loop. Default: true




<a id="nestedblock--trigger"></a>
### Nested Schema for `trigger`

Optional:

- `event` (Block List, Max: 1) If specified the workflow is getting triggered based on events (see [below for nested schema](#nestedblock--trigger--event))
- `schedule` (Block List, Max: 1) If specified the workflow is getting triggered based on a schedule (see [below for nested schema](#nestedblock--trigger--schedule))

<a id="nestedblock--trigger--event"></a>
### Nested Schema for `trigger.event`

Optional:

- `active` (Boolean) If specified the workflow is getting triggered based on a schedule
- `config` (Block List, Max: 1) If specified the workflow is getting triggered based on events (see [below for nested schema](#nestedblock--trigger--event--config))

<a id="nestedblock--trigger--event--config"></a>
### Nested Schema for `trigger.event.config`

Optional:

- `davis_event` (Block List, Max: 1) Contains trigger configuration based on Davis Events. Either `davis_event`, `davis_problem`, `davis_event` or `config` need to set (see [below for nested schema](#nestedblock--trigger--event--config--davis_event))
- `davis_problem` (Block List, Max: 1) Contains trigger configuration based on Davis Problems. Either `davis_event`, `davis_problem`, `davis_event` or `config` need to set (see [below for nested schema](#nestedblock--trigger--event--config--davis_problem))
- `event` (Block List, Max: 1) Contains trigger configuration based on Davis Problems. Either `davis_event`, `davis_problem`, `davis_event` or `config` need to set (see [below for nested schema](#nestedblock--trigger--event--config--event))
- `type` (String) The type of the trigger configuration to expect within attribute `value`. Only required if `config` is set. Must not be set if `davis_event`, `davis_problem` or `event` are present
- `value` (String) Contains JSON encoded trigger configuration if the trigger type is neither `davis_event`, `davis_problem` or `event`. It requires the attribute `type` to be set in combination

<a id="nestedblock--trigger--event--config--davis_event"></a>
### Nested Schema for `trigger.event.config.davis_event`

Optional:

- `entity_tags` (Map of String) key/value pairs for entity tags to match for. For tags that don't require a value, just specify an empty string as value. Omit this attribute if all entities should match
- `entity_tags_match` (String) Specifies whether all or just any of the configured entity tags need to match. Possible values: `all` and `any`. Omit this attribute if all entities should match
- `on_problem_close` (Boolean) If set to `true` closing a problem also is considered an event that triggers the execution
- `types` (Set of String) The types of davis events to trigger an execution. Possible values are `CUSTOM_ANNOTATION`, `APPLICATION_UNEXPECTED_HIGH_LOAD`, `APPLICATION_UNEXPECTED_LOW_LOAD`, `APPLICATION_OVERLOAD_PREVENTION`, `APPLICATION_SLOWDOWN`, `AVAILABILITY_EVENT`, `LOG_AVAILABILITY`, `EC2_HIGH_CPU`, `RDS_BACKUP_COMPLETED`, `RDS_BACKUP_STARTED`, `SYNTHETIC_GLOBAL_OUTAGE`, `SYNTHETIC_LOCAL_OUTAGE`, `SYNTHETIC_TEST_LOCATION_SLOWDOWN`, `CUSTOM_CONFIGURATION`, `PROCESS_NA_HIGH_CONN_FAIL_RATE`, `OSI_HIGH_CPU`, `CUSTOM_ALERT`, `CUSTOM_APP_CRASH_RATE_INCREASED`, `CUSTOM_APPLICATION_ERROR_RATE_INCREASED`, `CUSTOM_APPLICATION_UNEXPECTED_HIGH_LOAD`, `CUSTOM_APPLICATION_UNEXPECTED_LOW_LOAD`, `CUSTOM_APPLICATION_OVERLOAD_PREVENTION`, `CUSTOM_APPLICATION_SLOWDOWN`, `PGI_CUSTOM_AVAILABILITY`, `PGI_CUSTOM_ERROR`, `CUSTOM_INFO`, `PGI_CUSTOM_PERFORMANCE`, `CUSTOM_DEPLOYMENT`, `DEPLOYMENT_CHANGED_CHANGE`, `DEPLOYMENT_CHANGED_NEW`, `DEPLOYMENT_CHANGED_REMOVED`, `EBS_VOLUME_HIGH_LATENCY`, `ERROR_EVENT`, `LOG_ERROR`, `ESXI_HOST_CONNECTION_FAILED`, `ESXI_HOST_CONNECTION_LOST`, `ESXI_GUEST_CPU_LIMIT_REACHED`, `ESXI_GUEST_ACTIVE_SWAP_WAIT`, `ESXI_HOST_CPU_SATURATION`, `ESXI_HOST_MEMORY_SATURATION`, `ESXI_HOST_MAINTENANCE`, `ESXI_HOST_NETWORK_PROBLEMS`, `ESXI_HOST_NO_CONNECTION`, `ESXI_HOST_SHUTDOWN`, `ESXI_HOST_DISK_SLOW`, `ESXI_HOST_UP`, `ESXI_HOST_TIMEOUT`, `ESXI_VM_IMPACT_HOST_CPU_SATURATION`, `ESXI_VM_IMPACT_HOST_MEMORY_SATURATION`, `DATABASE_CONNECTION_FAILURE`, `RDS_AZ_FAILOVER_COMPLETED`, `RDS_AZ_FAILOVER_STARTED`, `SERVICE_ERROR_RATE_INCREASED`, `RDS_HIGH_LATENCY`, `OSI_NIC_UTILIZATION_HIGH`, `OSI_NIC_ERRORS_HIGH`, `PGI_HAPROXY_QUEUED_REQUESTS_HIGH`, `PGI_RMQ_HIGH_FILE_DESC_USAGE`, `PGI_RMQ_HIGH_MEM_USAGE`, `PGI_RMQ_HIGH_PROCESS_USAGE`, `PGI_RMQ_HIGH_SOCKETS_USAGE`, `OSI_NIC_DROPPED_PACKETS_HIGH`, `PGI_MYSQL_SLOW_QUERIES_RATE_HIGH`, `PGI_KEYSTONE_SLOW`, `PGI_HAPROXY_SESSION_USAGE_HIGH`, `HOST_LOG_AVAILABILITY`, `HOST_LOG_ERROR`, `OSI_GRACEFULLY_SHUTDOWN`, `HOST_LOG_MATCHED`, `OSI_UNEXPECTEDLY_UNAVAILABLE`, `HOST_LOG_PERFORMANCE`, `HOST_OF_SERVICE_UNAVAILABLE`, `HTTP_CHECK_GLOBAL_OUTAGE`, `HTTP_CHECK_LOCAL_OUTAGE`, `HTTP_CHECK_TEST_LOCATION_SLOWDOWN`, `ESXI_HOST_DISK_QUEUE_SLOW`, `LOG_MATCHED`, `APPLICATION_ERROR_RATE_INCREASED`, `APPLICATION_JS_FRAMEWORK_DETECTED`, `AWS_LAMBDA_HIGH_ERROR_RATE`, `ELB_HIGH_BACKEND_ERROR_RATE`, `ELB_HIGH_FRONTEND_ERROR_RATE`, `ELB_HIGH_UNHEALTHY_HOST_RATE`, `PROCESS_HIGH_GC_ACTIVITY`, `ESXI_HOST_DATASTORE_LOW_DISK_SPACE`, `OSI_DOCKER_DEVICEMAPPER_LOW_DATA_SPACE`, `OSI_LOW_DISK_SPACE`, `OSI_DOCKER_DEVICEMAPPER_LOW_METADATA_SPACE`, `OSI_DISK_LOW_INODES`, `PGI_RMQ_LOW_DISK_SPACE`, `RDS_LOW_STORAGE_SPACE`, `MARKED_FOR_TERMINATION`, `PROCESS_MEMORY_RESOURCE_EXHAUSTED`, `OSI_HIGH_MEMORY`, `MOBILE_APP_CRASH_RATE_INCREASED`, `MOBILE_APPLICATION_ERROR_RATE_INCREASED`, `MOBILE_APPLICATION_OVERLOAD_PREVENTION`, `MOBILE_APPLICATION_SLOWDOWN`, `MOBILE_APPLICATION_UNEXPECTED_HIGH_LOAD`, `MOBILE_APPLICATION_UNEXPECTED_LOW_LOAD`, `MONITORING_UNAVAILABLE`, `PROCESS_NA_HIGH_LOSS_RATE`, `PGI_KEYSTONE_UNHEALTHY`, `ESXI_HOST_OVERLOADED_STORAGE`, `PERFORMANCE_EVENT`, `LOG_PERFORMANCE`, `PGI_LOG_AVAILABILITY`, `PGI_CRASHED_INFO`, `PROCESS_CRASHED`, `PGI_LOG_ERROR`, `PG_LOW_INSTANCE_COUNT`, `PGI_LOG_MATCHED`, `PGI_MEMDUMP`, `PGI_LOG_PERFORMANCE`, `PROCESS_RESTART`, `PGI_UNAVAILABLE`, `RDS_HIGH_CPU`, `RDS_LOW_MEMORY`, `RDS_OF_SERVICE_UNAVAILABLE`, `RESOURCE_CONTENTION_EVENT`, `SERVICE_SLOWDOWN`, `RDS_RESTART`, `RDS_RESTART_SEQUENCE`, `PGI_OF_SERVICE_UNAVAILABLE`, `OSI_SLOW_DISK`, `SYNTHETIC_NODE_OUTAGE`, `SYNTHETIC_PRIVATE_LOCATION_OUTAGE`, `EXTERNAL_SYNTHETIC_TEST_OUTAGE`, `EXTERNAL_SYNTHETIC_TEST_SLOWDOWN`, `PROCESS_THREADS_RESOURCE_EXHAUSTED`, `SERVICE_UNEXPECTED_HIGH_LOAD`, `SERVICE_UNEXPECTED_LOW_LOAD`, `ESXI_VM_DISCONNECTED`, `OPENSTACK_VM_LAUNCH_FAILED`, `ESXI_HOST_VM_MOTION_LEFT`, `ESXI_HOST_VM_MOTION_ARRIVED`, `ESXI_VM_MOTION`, `OPENSTACK_VM_MOTION`, `ESXI_VM_POWER_OFF`, `ESXI_VM_SHUTDOWN`, `OPENSTACK_HOST_VM_SHUTDOWN`, `ESXI_VM_START`, `ESXI_HOST_VM_STARTED`, `OPENSTACK_HOST_VM_STARTED`


<a id="nestedblock--trigger--event--config--davis_problem"></a>
### Nested Schema for `trigger.event.config.davis_problem`

Required:

- `categories` (Block List, Min: 1) (see [below for nested schema](#nestedblock--trigger--event--config--davis_problem--categories))

Optional:

- `custom_filter` (String)
- `entity_tags` (Map of String) key/value pairs for entity tags to match for. For tags that don't require a value, just specify an empty string as value. Omit this attribute if all entities should match
- `entity_tags_match` (String) Specifies whether all or just any of the configured entity tags need to match. Possible values: `all` and `any`. Omit this attribute if all entities should match
- `on_problem_close` (Boolean) If set to `true` closing a problem also is considered an event that triggers the execution

<a id="nestedblock--trigger--event--config--davis_problem--categories"></a>
### Nested Schema for `trigger.event.config.davis_problem.categories`

Optional:

- `availability` (Boolean)
- `custom` (Boolean)
- `error` (Boolean)
- `info` (Boolean)
- `monitoring_unavailable` (Boolean)
- `resource` (Boolean)
- `slowdown` (Boolean)



<a id="nestedblock--trigger--event--config--event"></a>
### Nested Schema for `trigger.event.config.event`

Required:

- `query` (String) A query based on DQL for events that trigger executions

Optional:

- `event_type` (String) Possible values: `events` or `bizevents`. Default: `events`




<a id="nestedblock--trigger--schedule"></a>
### Nested Schema for `trigger.schedule`

Required:

- `trigger` (Block List, Min: 1, Max: 1) Detailed configuration about the timing constraints that trigger the execution (see [below for nested schema](#nestedblock--trigger--schedule--trigger))

Optional:

- `active` (Boolean) The trigger is enabled (`true`) or not (`false`). Default is `false`
- `filter_parameters` (Block List, Max: 1) Advanced restrictions for the schedule to trigger executions (see [below for nested schema](#nestedblock--trigger--schedule--filter_parameters))
- `rule` (String) Refers to a configured rule that determines at which days the schedule should be active. If not specified it implies that the schedule is valid every day
- `time_zone` (String) A time zone the scheduled times to align with. If not specified it will be chosen automatically based on the location of the Dynatrace Server

<a id="nestedblock--trigger--schedule--trigger"></a>
### Nested Schema for `trigger.schedule.trigger`

Optional:

- `between_end` (String) Triggers the schedule every n minutes within a given time frame - specifying the end time on any valid day in 24h format (e.g. 14:22:44). Conflicts with `cron` and `time`. Required with `interval_minutes` and `between_start`
- `between_start` (String) Triggers the schedule every n minutes within a given time frame - specifying the start time on any valid day in 24h format (e.g. 13:22:44). Conflicts with `cron` and `time`. Required with `interval_minutes` and `between_end`
- `cron` (String) Configures using cron syntax. Conflicts with `time`, `interval_minutes`, `between_start` and `between_end`
- `interval_minutes` (Number) Triggers the schedule every n minutes within a given time frame. Minimum: 1, Maximum: 720. Required with `between_start` and `between_end`. Conflicts with `cron` and `time`
- `time` (String) Specifies a fixed time the schedule will trigger at in 24h format (e.g. `14:23:59`). Conflicts with `cron`, `interval_minutes`, `between_start` and `between_end`


<a id="nestedblock--trigger--schedule--filter_parameters"></a>
### Nested Schema for `trigger.schedule.filter_parameters`

Optional:

- `count` (Number) If specified, the schedule will end triggering executions af the given amount of executions. Minimum: 1, Maximum: 10
- `earliest_start` (String) If specified, the schedule won't trigger executions before the given date
- `earliest_start_time` (String) If specified, the schedule won't trigger executions before the given time
- `exclude_dates` (Set of String) If specified, the schedule won't trigger exeuctions on the given dates
- `include_dates` (Set of String) If specified, the schedule will trigger executions on the given dates, even if the main configuration prohibits it
- `until` (String) If specified, the schedule won't trigger executions after the given date
