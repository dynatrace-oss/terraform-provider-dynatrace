---
layout: ""
page_title: "dynatrace_os_services Resource - terraform-provider-dynatrace"
subcategory: "Host Monitoring"
description: |-
  The resource `dynatrace_os_services` covers configuration for monitoring OS services
---

# dynatrace_os_services (Resource)

-> This resource requires the API token scopes **Read settings** (`settings.read`) and **Write settings** (`settings.write`)

## Dynatrace Documentation

- OS services monitoring - https://www.dynatrace.com/support/help/platform-modules/infrastructure-monitoring/hosts/monitoring/os-services

- Settings API - https://www.dynatrace.com/support/help/dynatrace-api/environment-api/settings (schemaId: `builtin:os-services-monitoring`)

## Export Example Usage

- `terraform-provider-dynatrace -export dynatrace_os_services` downloads all existing OS services monitoring configuration

The full documentation of the export feature is available [here](https://registry.terraform.io/providers/dynatrace-oss/dynatrace/latest/docs/guides/export-v2).

## Resource Example Usage

```terraform
resource "dynatrace_os_services" "#name#" {
  name                      = "#name#"
  enabled                   = true
  alert_activation_duration = 5
  alerting                  = true
  monitoring                = true
  not_installed_alerting    = true
  scope                     = "HOST-1234567890000000"
  status_condition_linux    = "$eq(failed)"
  system                    = "LINUX"
  detection_conditions_linux {
    linux_detection_condition {
      condition = "$contains(Terraform)"
      property  = "ServiceName"
    }
  }
  metadata {
    item {
      metadata_key   = "TerraformKey"
      metadata_value = "TerraformValue"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `alerting` (Boolean) Toggle the switch in order to enable or disable alerting for this policy
- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)
- `monitoring` (Boolean) Toggle the switch in order to enable or disable availability metric monitoring for this policy. Availability metrics produce custom metrics. Refer to [documentation](https://dt-url.net/vl03xzk) for consumption examples. Each monitored service consumes one custom metric.
- `name` (String) Rule name
- `system` (String) Possible Values: `LINUX`, `WINDOWS`

### Optional

- `alert_activation_duration` (Number) The number of **10-second measurement cycles** before alerting is triggered
- `detection_conditions_linux` (Block List, Max: 1) Detection rules (see [below for nested schema](#nestedblock--detection_conditions_linux))
- `detection_conditions_windows` (Block List, Max: 1) Detection rules (see [below for nested schema](#nestedblock--detection_conditions_windows))
- `metadata` (Block List, Max: 1) Set of additional key-value properties to be attached to the triggered event. (see [below for nested schema](#nestedblock--metadata))
- `not_installed_alerting` (Boolean) By default, Dynatrace does not alert if the service is not installed. Toggle the switch to enable or disable this feature
- `scope` (String) The scope of this setting (HOST, HOST_GROUP). Omit this property if you want to cover the whole environment.
- `status_condition_linux` (String) This string has to match a required format. See [OS services monitoring](https://dt-url.net/vl03xzk).

- `$eq(failed)` – Matches services that are in failed state.

Available logic operations:
- `$not($eq(active))` – Matches services with state different from active.
- `$or($eq(inactive),$eq(failed))` – Matches services that are either in inactive or failed state.

Use one of the following values as a parameter for this condition:

- `reloading`
- `activating`
- `deactivating`
- `failed`
- `inactive`
- `active`
- `status_condition_windows` (String) This string has to match a required format. See [OS services monitoring](https://dt-url.net/vl03xzk).

- `$eq(paused)` – Matches services that are in paused state.

Available logic operations:
- `$not($eq(paused))` – Matches services that are in state different from paused.
- `$or($eq(paused),$eq(running))` – Matches services that are either in paused or running state.

Use one of the following values as a parameter for this condition:

- `running`
- `stopped`
- `start_pending`
- `stop_pending`
- `continue_pending`
- `pause_pending`
- `paused`

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--detection_conditions_linux"></a>
### Nested Schema for `detection_conditions_linux`

Required:

- `linux_detection_condition` (Block List, Min: 1) (see [below for nested schema](#nestedblock--detection_conditions_linux--linux_detection_condition))

<a id="nestedblock--detection_conditions_linux--linux_detection_condition"></a>
### Nested Schema for `detection_conditions_linux.linux_detection_condition`

Optional:

- `condition` (String) This string has to match a required format. See [OS services monitoring](https://dt-url.net/vl03xzk).

- `$contains(ssh)` – Matches if `ssh` appears anywhere in the service's property value.
- `$eq(sshd)` – Matches if `sshd` matches the service's property value exactly.
- `$prefix(ss)` – Matches if `ss` matches the prefix of the service's property value.
- `$suffix(hd)` – Matches if `hd` matches the suffix of the service's property value.

Available logic operations:
- `$not($eq(sshd))` – Matches if the service's property value is different from `sshd`.
- `$and($prefix(ss),$suffix(hd))` – Matches if service's property value starts with `ss` and ends with `hd`.
- `$or($prefix(ss),$suffix(hd))` – Matches if service's property value starts with `ss` or ends with `hd`.
- `host_metadata_condition` (Block List, Max: 1) Custom metadata (see [below for nested schema](#nestedblock--detection_conditions_linux--linux_detection_condition--host_metadata_condition))
- `property` (String) Possible Values: `ServiceName`, `StartupType`
- `rule_type` (String) Possible Values: `RuleTypeHost`, `RuleTypeOsService`
- `startup_condition` (String) This string has to match a required format. See [OS services monitoring](https://dt-url.net/vl03xzk).

- `$eq(enabled)` – Matches services with startup type equal to enabled.

Available logic operations:
- `$not($eq(enabled))` – Matches services with startup type different from enabled.
- `$or($eq(enabled),$eq(disabled))` - Matches services that are either enabled or disabled.

Use one of the following values as a parameter for this condition:

- `enabled`
- `enabled-runtime`
- `static`
- `disabled`

<a id="nestedblock--detection_conditions_linux--linux_detection_condition--host_metadata_condition"></a>
### Nested Schema for `detection_conditions_linux.linux_detection_condition.host_metadata_condition`

Required:

- `metadata_condition` (String) This string has to match a required format. See [OS services monitoring](https://dt-url.net/vl03xzk).

- `$contains(production)` – Matches if `production` appears anywhere in the host metadata value.
- `$eq(production)` – Matches if `production` matches the host metadata value exactly.
- `$prefix(production)` – Matches if `production` matches the prefix of the host metadata value.
- `$suffix(production)` – Matches if `production` matches the suffix of the host metadata value.

Available logic operations:
- `$not($eq(production))` – Matches if the host metadata value is different from `production`.
- `$and($prefix(production),$suffix(main))` – Matches if host metadata value starts with `production` and ends with `main`.
- `$or($prefix(production),$suffix(main))` – Matches if host metadata value starts with `production` or ends with `main`.
- `metadata_key` (String) Key




<a id="nestedblock--detection_conditions_windows"></a>
### Nested Schema for `detection_conditions_windows`

Required:

- `detection_conditions_window` (Block List, Min: 1) (see [below for nested schema](#nestedblock--detection_conditions_windows--detection_conditions_window))

<a id="nestedblock--detection_conditions_windows--detection_conditions_window"></a>
### Nested Schema for `detection_conditions_windows.detection_conditions_window`

Optional:

- `condition` (String) This string has to match a required format. See [OS services monitoring](https://dt-url.net/vl03xzk).

- `$contains(ssh)` – Matches if `ssh` appears anywhere in the service's property value.
- `$eq(sshd)` – Matches if `sshd` matches the service's property value exactly.
- `$prefix(ss)` – Matches if `ss` matches the prefix of the service's property value.
- `$suffix(hd)` – Matches if `hd` matches the suffix of the service's property value.

Available logic operations:
- `$not($eq(sshd))` – Matches if the service's property value is different from `sshd`.
- `$and($prefix(ss),$suffix(hd))` – Matches if service's property value starts with `ss` and ends with `hd`.
- `$or($prefix(ss),$suffix(hd))` – Matches if service's property value starts with `ss` or ends with `hd`.
- `host_metadata_condition` (Block List, Max: 1) Custom metadata (see [below for nested schema](#nestedblock--detection_conditions_windows--detection_conditions_window--host_metadata_condition))
- `property` (String) Possible Values: `DisplayName`, `Manufacturer`, `Path`, `ServiceName`, `StartupType`
- `rule_type` (String) Possible Values: `RuleTypeHost`, `RuleTypeOsService`
- `startup_condition` (String) This string has to match a required format. See [OS services monitoring](https://dt-url.net/vl03xzk).

- `$eq(manual)` – Matches services that are started manually.

Available logic operations:
- `$not($eq(auto))` – Matches services with startup type different from Automatic.
- `$or($eq(auto),$eq(manual))` – Matches if service's startup type is either Automatic or Manual.

Use one of the following values as a parameter for this condition:

- `manual` for Manual
- `manual_trigger` for Manual (Trigger Start)
- `auto` for Automatic
- `auto_delay` for Automatic (Delayed Start)
- `auto_trigger` for Automatic (Trigger Start)
- `auto_delay_trigger` for Automatic (Delayed Start, Trigger Start)
- `disabled` for Disabled

<a id="nestedblock--detection_conditions_windows--detection_conditions_window--host_metadata_condition"></a>
### Nested Schema for `detection_conditions_windows.detection_conditions_window.host_metadata_condition`

Required:

- `metadata_condition` (String) This string has to match a required format. See [OS services monitoring](https://dt-url.net/vl03xzk).

- `$contains(production)` – Matches if `production` appears anywhere in the host metadata value.
- `$eq(production)` – Matches if `production` matches the host metadata value exactly.
- `$prefix(production)` – Matches if `production` matches the prefix of the host metadata value.
- `$suffix(production)` – Matches if `production` matches the suffix of the host metadata value.

Available logic operations:
- `$not($eq(production))` – Matches if the host metadata value is different from `production`.
- `$and($prefix(production),$suffix(main))` – Matches if host metadata value starts with `production` and ends with `main`.
- `$or($prefix(production),$suffix(main))` – Matches if host metadata value starts with `production` or ends with `main`.
- `metadata_key` (String) Key




<a id="nestedblock--metadata"></a>
### Nested Schema for `metadata`

Required:

- `item` (Block Set, Min: 1) (see [below for nested schema](#nestedblock--metadata--item))

<a id="nestedblock--metadata--item"></a>
### Nested Schema for `metadata.item`

Required:

- `metadata_key` (String) Type 'dt.' for key hints.
- `metadata_value` (String) no documentation available
 