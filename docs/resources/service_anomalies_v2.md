---
layout: ""
page_title: dynatrace_service_anomalies_v2 Resource - terraform-provider-dynatrace"
subcategory: "Anomaly Detection"
description: |-
  The resource `dynatrace_service_anomalies_v2` covers configuration for service anomaly detection
---

# dynatrace_service_anomalies_v2 (Resource)

-> This resource requires the API token scopes **Read settings** (`settings.read`) and **Write settings** (`settings.write`)

## Dynatrace Documentation

- Adjust the sensitivity of anomaly detection for services - https://www.dynatrace.com/support/help/how-to-use-dynatrace/problem-detection-and-analysis/problem-detection/adjust-sensitivity-anomaly-detection/adjust-sensitivity-services

- Settings API - https://www.dynatrace.com/support/help/dynatrace-api/environment-api/settings (schemaId: `builtin:anomaly-detection.services`)

## Export Example Usage

- `terraform-provider-dynatrace -export dynatrace_service_anomalies_v2` downloads all existing service anomaly detection configuration

The full documentation of the export feature is available [here](https://dt-url.net/h203qmc).

## Resource Example Usage

```terraform
resource "dynatrace_service_anomalies_v2" "#name#" {
  scope = "SERVICE-1234567890000000"
  failure_rate {
    enabled        = true
    detection_mode = "fixed"
    fixed_detection {
      sensitivity = "high"
      threshold   = 5
      over_alerting_protection {
        minutes_abnormal_state = 1
        requests_per_minute    = 10
      }
    }
  }
  load_drops {
    enabled                = true
    load_drop_percent      = 50
    minutes_abnormal_state = 1
  }
  load_spikes {
    enabled                = true
    load_spike_percent     = 200
    minutes_abnormal_state = 1
  }
  response_time {
    enabled        = true
    detection_mode = "fixed"
    fixed_detection {
      sensitivity = "high"
      over_alerting_protection {
        minutes_abnormal_state = 1
        requests_per_minute    = 10
      }
      response_time_all {
        degradation_milliseconds = 100
      }
      response_time_slowest {
        slowest_degradation_milliseconds = 1000
      }
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `failure_rate` (Block List, Min: 1, Max: 1) Failure rate (see [below for nested schema](#nestedblock--failure_rate))
- `load_drops` (Block List, Min: 1, Max: 1) Alert if the observed load is lower than the expected load by a specified margin for a specified amount of time: (see [below for nested schema](#nestedblock--load_drops))
- `load_spikes` (Block List, Min: 1, Max: 1) Alert if the observed load exceeds the expected load by a specified margin for a specified amount of time: (see [below for nested schema](#nestedblock--load_spikes))
- `response_time` (Block List, Min: 1, Max: 1) Response time (see [below for nested schema](#nestedblock--response_time))

### Optional

- `scope` (String) The scope of this setting (SERVICE_METHOD, SERVICE, HOST_GROUP). Omit this property if you want to cover the whole environment.

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--failure_rate"></a>
### Nested Schema for `failure_rate`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `auto_detection` (Block List, Max: 1) Alert if the percentage of failing service calls increases by **both** the absolute and relative thresholds: (see [below for nested schema](#nestedblock--failure_rate--auto_detection))
- `detection_mode` (String) Possible Values: `Auto`, `Fixed`
- `fixed_detection` (Block List, Max: 1) Alert if a given failure rate is exceeded during any 5-minute-period (see [below for nested schema](#nestedblock--failure_rate--fixed_detection))

<a id="nestedblock--failure_rate--auto_detection"></a>
### Nested Schema for `failure_rate.auto_detection`

Required:

- `absolute_increase` (Number) Absolute threshold
- `over_alerting_protection` (Block List, Min: 1, Max: 1) Avoid over-alerting (see [below for nested schema](#nestedblock--failure_rate--auto_detection--over_alerting_protection))
- `relative_increase` (Number) Relative threshold

<a id="nestedblock--failure_rate--auto_detection--over_alerting_protection"></a>
### Nested Schema for `failure_rate.auto_detection.over_alerting_protection`

Required:

- `minutes_abnormal_state` (Number) Only alert if the abnormal state remains for at least
- `requests_per_minute` (Number) Only alert if there are at least



<a id="nestedblock--failure_rate--fixed_detection"></a>
### Nested Schema for `failure_rate.fixed_detection`

Required:

- `over_alerting_protection` (Block List, Min: 1, Max: 1) Avoid over-alerting (see [below for nested schema](#nestedblock--failure_rate--fixed_detection--over_alerting_protection))
- `sensitivity` (String) Possible Values: `High`, `Low`, `Medium`
- `threshold` (Number) no documentation available

<a id="nestedblock--failure_rate--fixed_detection--over_alerting_protection"></a>
### Nested Schema for `failure_rate.fixed_detection.over_alerting_protection`

Required:

- `minutes_abnormal_state` (Number) Only alert if the abnormal state remains for at least
- `requests_per_minute` (Number) Only alert if there are at least




<a id="nestedblock--load_drops"></a>
### Nested Schema for `load_drops`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `load_drop_percent` (Number) Threshold
- `minutes_abnormal_state` (Number) Time span


<a id="nestedblock--load_spikes"></a>
### Nested Schema for `load_spikes`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `load_spike_percent` (Number) Threshold
- `minutes_abnormal_state` (Number) Time span


<a id="nestedblock--response_time"></a>
### Nested Schema for `response_time`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `auto_detection` (Block List, Max: 1) no documentation available (see [below for nested schema](#nestedblock--response_time--auto_detection))
- `detection_mode` (String) Possible Values: `Auto`, `Fixed`
- `fixed_detection` (Block List, Max: 1) no documentation available (see [below for nested schema](#nestedblock--response_time--fixed_detection))

<a id="nestedblock--response_time--auto_detection"></a>
### Nested Schema for `response_time.auto_detection`

Required:

- `over_alerting_protection` (Block List, Min: 1, Max: 1) Avoid over-alerting (see [below for nested schema](#nestedblock--response_time--auto_detection--over_alerting_protection))
- `response_time_all` (Block List, Min: 1, Max: 1) Alert if the median response time of all requests degrades beyond **both** the absolute and relative thresholds: (see [below for nested schema](#nestedblock--response_time--auto_detection--response_time_all))
- `response_time_slowest` (Block List, Min: 1, Max: 1) Alert if the response time of the slowest 10% of requests degrades beyond **both** the absolute and relative thresholds: (see [below for nested schema](#nestedblock--response_time--auto_detection--response_time_slowest))

<a id="nestedblock--response_time--auto_detection--over_alerting_protection"></a>
### Nested Schema for `response_time.auto_detection.over_alerting_protection`

Required:

- `minutes_abnormal_state` (Number) Only alert if the abnormal state remains for at least
- `requests_per_minute` (Number) Only alert if there are at least


<a id="nestedblock--response_time--auto_detection--response_time_all"></a>
### Nested Schema for `response_time.auto_detection.response_time_all`

Required:

- `degradation_milliseconds` (Number) Absolute threshold
- `degradation_percent` (Number) Relative threshold


<a id="nestedblock--response_time--auto_detection--response_time_slowest"></a>
### Nested Schema for `response_time.auto_detection.response_time_slowest`

Required:

- `slowest_degradation_milliseconds` (Number) Absolute threshold
- `slowest_degradation_percent` (Number) Relative threshold



<a id="nestedblock--response_time--fixed_detection"></a>
### Nested Schema for `response_time.fixed_detection`

Required:

- `over_alerting_protection` (Block List, Min: 1, Max: 1) Avoid over-alerting (see [below for nested schema](#nestedblock--response_time--fixed_detection--over_alerting_protection))
- `response_time_all` (Block List, Min: 1, Max: 1) Alert if the median response time of all requests degrades beyond this threshold: (see [below for nested schema](#nestedblock--response_time--fixed_detection--response_time_all))
- `response_time_slowest` (Block List, Min: 1, Max: 1) Alert if the response time of the slowest 10% of requests degrades beyond this threshold: (see [below for nested schema](#nestedblock--response_time--fixed_detection--response_time_slowest))
- `sensitivity` (String) Possible Values: `High`, `Low`, `Medium`

<a id="nestedblock--response_time--fixed_detection--over_alerting_protection"></a>
### Nested Schema for `response_time.fixed_detection.over_alerting_protection`

Required:

- `minutes_abnormal_state` (Number) Only alert if the abnormal state remains for at least
- `requests_per_minute` (Number) Only alert if there are at least


<a id="nestedblock--response_time--fixed_detection--response_time_all"></a>
### Nested Schema for `response_time.fixed_detection.response_time_all`

Required:

- `degradation_milliseconds` (Number) Alert if the response time degrades beyond this many ms within an observation period of 5 minutes


<a id="nestedblock--response_time--fixed_detection--response_time_slowest"></a>
### Nested Schema for `response_time.fixed_detection.response_time_slowest`

Required:

- `slowest_degradation_milliseconds` (Number) Alert if the response time of the slowest 10% degrades beyond this many ms within an observation period of 5 minutes
 