---
layout: ""
page_title: dynatrace_opentelemetry_metrics Resource - terraform-provider-dynatrace"
subcategory: "OpenTelemetry & OpenTracing"
description: |-
  The resource `dynatrace_opentelemetry_metrics` covers configuration for OpenTelemetry metrics
---

# dynatrace_opentelemetry_metrics (Resource)

-> This resource requires the API token scopes **Read settings** (`settings.read`) and **Write settings** (`settings.write`)

## Dynatrace Documentation

- OpenTelemetry metrics - https://www.dynatrace.com/support/help/extend-dynatrace/opentelemetry/opentelemetry-metrics

- Settings API - https://www.dynatrace.com/support/help/dynatrace-api/environment-api/settings (schemaId: `builtin:opentelemetry-metrics`)

## Export Example Usage

- `terraform-provider-dynatrace -export dynatrace_opentelemetry_metrics` downloads all existing OpenTelemetry metric configuration

The full documentation of the export feature is available [here](https://dt-url.net/h203qmc).

## Resource Example Usage

```terraform
resource "dynatrace_opentelemetry_metrics" "#name#" {
  additional_attributes_to_dimension_enabled = true
  meter_name_to_dimension_enabled            = true
  scope                                      = "environment"
  additional_attributes {
    additional_attribute {
      enabled       = true
      attribute_key = "terraform.test.add"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "service.name"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "host.id"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "host.name"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "faas.id"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "faas.name"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "k8s.cluster.name"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "k8s.node.name"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "k8s.namespace.name"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "k8s.deployment.name"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "k8s.statefulset.name"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "k8s.daemonset.name"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "k8s.job.name"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "k8s.cronjob.name"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "k8s.pod.uid"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "k8s.pod.name"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "process.executable.name"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "dt.metrics.source"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "dt.entity.host"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "dt.entity.process_group_instance"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "dt.entity.host_group"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "dt.kubernetes.workload.kind"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "dt.kubernetes.workload.name"
    }
    additional_attribute {
      enabled       = true
      attribute_key = "dt.kubernetes.cluster.id"
    }
  }
  to_drop_attributes {
    to_drop_attribute {
      enabled       = true
      attribute_key = "terraform.test.drop"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `additional_attributes` (Block List, Max: 1) When enabled, the attributes defined in the list below will be added as dimensions to ingested OTLP metrics if they are present in the OpenTelemetry resource or in the instrumentation scope.

**Notes:**

* Modifying this setting (renaming, disabling or removing attributes) will cause the metric to change. This may have an impact on existing dashboards, events and alerts that make use of these dimensions. In this case, they will need to be updated manually.

* Dynatrace does not recommend changing/removing the attributes starting with "dt.". Dynatrace leverages these attributes to [Enrich metrics](https://www.dynatrace.com/support/help/extend-dynatrace/extend-metrics/reference/enrich-metrics). (see [below for nested schema](#nestedblock--additional_attributes))
- `additional_attributes_to_dimension_enabled` (Boolean) Add the resource and scope attributes configured below as dimensions
- `meter_name_to_dimension_enabled` (Boolean) When enabled, the Meter name (also referred to as InstrumentationScope or InstrumentationLibrary in OpenTelemetry SDKs) and version will be added as dimensions (`otel.scope.name` and `otel.scope.version`) to ingested OTLP metrics.

**Note:** Modifying this setting will cause the metric to change. This may have an impact on existing dashboards, events and alerts that make use of these dimensions. In this case, they will need to be updated manually
- `mode` (String) Specifies whether the given attributes to enable (`additional_attributes`) and the attributes to drop (`to_drop_attributes`) will get applied explicitly (`EXPLICIT`) or additive (`ADDITIVE`).

Default behavior is `EXPLICIT` - in which case it is recommended to have just ONE instance of this resource

With mode `ADDITIVE` you're able to have multiple instances of this resource within the same Terraform Module.

**Note:** Using `ADDITIVE` and `EXPLICIT` at the same time within differnt resource instances will lead to unexpected results.
- `scope` (String) The scope of this setting (environment-default). Omit this property if you want to cover the whole environment.
- `to_drop_attributes` (Block List, Max: 1) The attributes defined in the list below will be dropped from all ingested OTLP metrics.

Upon ingest, the *Allow list: resource and scope attributes* above is applied first. Then, the *Deny list: all attributes* below is applied. The deny list therefore applies to all attributes from all sources (data points, scope and resource).

**Notes:**

* Modifying this setting (adding, renaming, disabling or removing attributes) will cause the metric to change. This may have an impact on existing dashboards, events and alerts that make use of these dimensions. In this case, they will need to be updated manually.

* Dynatrace does not recommend including attributes starting with "dt." to the deny list. Dynatrace leverages these attributes to [Enrich metrics](https://www.dynatrace.com/support/help/extend-dynatrace/extend-metrics/reference/enrich-metrics). (see [below for nested schema](#nestedblock--to_drop_attributes))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--additional_attributes"></a>
### Nested Schema for `additional_attributes`

Required:

- `additional_attribute` (Block Set, Min: 1) (see [below for nested schema](#nestedblock--additional_attributes--additional_attribute))

<a id="nestedblock--additional_attributes--additional_attribute"></a>
### Nested Schema for `additional_attributes.additional_attribute`

Required:

- `attribute_key` (String) Attribute key
- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)



<a id="nestedblock--to_drop_attributes"></a>
### Nested Schema for `to_drop_attributes`

Required:

- `to_drop_attribute` (Block Set, Min: 1) (see [below for nested schema](#nestedblock--to_drop_attributes--to_drop_attribute))

<a id="nestedblock--to_drop_attributes--to_drop_attribute"></a>
### Nested Schema for `to_drop_attributes.to_drop_attribute`

Required:

- `attribute_key` (String) Attribute key
- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)
 