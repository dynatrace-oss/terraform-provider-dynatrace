---
layout: ""
page_title: "dynatrace_span_capture_rule Resource - terraform-provider-dynatrace"
subcategory: "OpenTelemetry & OpenTracing"
description: |-
  The resource `dynatrace_span_capture_rule` covers configuration for span capture rules
---

# dynatrace_span_capture_rule (Resource)

-> This resource requires the API token scopes **Read settings** (`settings.read`) and **Write settings** (`settings.write`)

## Dynatrace Documentation

- Span settings - https://www.dynatrace.com/support/help/extend-dynatrace/extend-tracing/span-settings

- Settings API - https://www.dynatrace.com/support/help/dynatrace-api/environment-api/settings (schemaId: `builtin:span-capturing`)

## Export Example Usage

- `terraform-provider-dynatrace -export dynatrace_span_capture_rule` downloads all existing span capture rule configuration

The full documentation of the export feature is available [here](https://dt-url.net/h203qmc).

## Resource Example Usage

```terraform
resource "dynatrace_span_capture_rule" "#name#" {
  name = "#name#"
  action = "IGNORE"
  matches {
    match {
      comparison = "EQUALS"
      source = "SPAN_NAME"
      value = "foo"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `action` (String) Whether to create an entry point or not
- `matches` (Block List, Min: 1, Max: 1) Matching strategies for the Span (see [below for nested schema](#nestedblock--matches))
- `name` (String) The name of the rule

### Optional

- `insert_after` (String) Because this resource allows for ordering you may specify the ID of the resource instance that comes before this instance regarding order. If not specified when creating the setting will be added to the end of the list. If not specified during update the order will remain untouched

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--matches"></a>
### Nested Schema for `matches`

Required:

- `match` (Block List, Min: 1) Matching strategies for the Span (see [below for nested schema](#nestedblock--matches--match))

<a id="nestedblock--matches--match"></a>
### Nested Schema for `matches.match`

Required:

- `comparison` (String) Possible values are `EQUALS`, `CONTAINS`, `STARTS_WITH`, `ENDS_WITH`, `DOES_NOT_EQUAL`, `DOES_NOT_CONTAIN`, `DOES_NOT_START_WITH` and `DOES_NOT_END_WITH`.
- `source` (String) What to match against. Possible values are `SPAN_NAME`, `SPAN_KIND`, `ATTRIBUTE`, `INSTRUMENTATION_LIBRARY_NAME` and `INSTRUMENTATION_LIBRARY_VERSION`

Optional:

- `case_sensitive` (Boolean) Whether to match strings case sensitively or not
- `key` (String) The name of the attribute if `source` is `ATTRIBUTE`
- `value` (String) The value to compare against. When `source` is `SPAN_KIND` the only allowed values are `INTERNAL`, `SERVER`, `CLIENT`, `PRODUCER` and `CONSUMER`
 