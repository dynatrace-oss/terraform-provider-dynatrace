---
layout: ""
page_title: dynatrace_service_failure Resource - terraform-provider-dynatrace"
description: |-
  The resource `dynatrace_service_failure` covers configuration for service-level general failure detection parameters
---

# dynatrace_service_failure (Resource)

-> This resource requires the API token scopes **Read settings** (`settings.read`) and **Write settings** (`settings.write`)

## Dynatrace Documentation

- Configure service failure detection - https://www.dynatrace.com/support/help/platform-modules/applications-and-microservices/services/service-monitoring-settings/configure-service-failure-detection

- Settings API - https://www.dynatrace.com/support/help/dynatrace-api/environment-api/settings (schemaId: `builtin:failure-detection.service.general-parameters`)

## Export Example Usage

- `terraform-provider-dynatrace -export dynatrace_service_failure` downloads all existing service-level general failure detection parameters

The full documentation of the export feature is available [here](https://registry.terraform.io/providers/dynatrace-oss/dynatrace/latest/docs/guides/export-v2).

## Resource Example Usage

```terraform
resource "dynatrace_service_failure" "#name#" {
  enabled    = true
  service_id = "SERVICE-D892CFE7DFAB0D08"
  exception_rules {
    ignore_all_exceptions         = false
    ignore_span_failure_detection = true
    custom_error_rules {
      custom_error_rule {
        request_attribute = "00000000-0000-0000-0000-000000000000"
        condition {
          compare_operation_type = "STARTS_WITH"
          case_sensitive = false
          text_value = "terraform"
        }
      }
    }
    custom_handled_exceptions {
      custom_handled_exception {
        class_pattern   = "ClassPatternExample"
        message_pattern = "ExceptionMessagePatternExample"
      }
    }
    ignored_exceptions {
      custom_handled_exception {
        class_pattern   = "ClassPatternExample"
        message_pattern = "ExceptionMessagePatternExample"
      }
    }
    success_forcing_exceptions {
      custom_handled_exception {
        class_pattern   = "ClassPatternExample"
        message_pattern = "ExceptionMessagePatternExample"
      }
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)
- `service_id` (String) The scope of this settings. If the settings should cover the whole environment, just don't specify any scope.

### Optional

- `exception_rules` (Block List, Max: 1) Customize failure detection for specific exceptions and errors (see [below for nested schema](#nestedblock--exception_rules))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--exception_rules"></a>
### Nested Schema for `exception_rules`

Required:

- `ignore_all_exceptions` (Boolean) Ignore all exceptions
- `ignore_span_failure_detection` (Boolean) Ignore span failure detection

Optional:

- `custom_error_rules` (Block List, Max: 1) Some custom error situations are only detectable via a return value or other means. To support such cases, [define a request attribute](https://dt-url.net/ys5k0p4y) that captures the required data. Then define a custom error rule that determines if the request has failed based on the value of the request attribute. (see [below for nested schema](#nestedblock--exception_rules--custom_error_rules))
- `custom_handled_exceptions` (Block List, Max: 1) There may be situations where your application code handles exceptions gracefully in a manner that these failures aren't detected by Dynatrace. Use this setting to define specific gracefully-handled exceptions that should be treated as service failures. (see [below for nested schema](#nestedblock--exception_rules--custom_handled_exceptions))
- `ignored_exceptions` (Block List, Max: 1) Some exceptions that are thrown by legacy or 3rd-party code indicate a specific response, not an error. Use this setting to instruct Dynatrace to treat such exceptions as non-failed requests.. If an exception matching any of the defined patterns occurs in a request, it will not be considered as a failure. Other exceptions occurring at the same request might still mark the request as failed. (see [below for nested schema](#nestedblock--exception_rules--ignored_exceptions))
- `success_forcing_exceptions` (Block List, Max: 1) Define exceptions which indicate that a service call should not be considered as failed. E.g. an exception indicating that the client aborted the operation.. If an exception matching any of the defined patterns occurs on the entry node of the service, it will be considered successful. Compared to ignored exceptions, the request will be considered successful even if other exceptions occur in the same request. (see [below for nested schema](#nestedblock--exception_rules--success_forcing_exceptions))

<a id="nestedblock--exception_rules--custom_error_rules"></a>
### Nested Schema for `exception_rules.custom_error_rules`

Required:

- `custom_error_rule` (Block Set, Min: 1) (see [below for nested schema](#nestedblock--exception_rules--custom_error_rules--custom_error_rule))

<a id="nestedblock--exception_rules--custom_error_rules--custom_error_rule"></a>
### Nested Schema for `exception_rules.custom_error_rules.custom_error_rule`

Required:

- `condition` (Block List, Min: 1, Max: 1) Request attribute condition (see [below for nested schema](#nestedblock--exception_rules--custom_error_rules--custom_error_rule--condition))
- `request_attribute` (String) Request attribute

<a id="nestedblock--exception_rules--custom_error_rules--custom_error_rule--condition"></a>
### Nested Schema for `exception_rules.custom_error_rules.custom_error_rule.condition`

Required:

- `compare_operation_type` (String) Apply this comparison

Optional:

- `case_sensitive` (Boolean) Case sensitive
- `double_value` (Number) Value
- `int_value` (Number) Value
- `text_value` (String) Value




<a id="nestedblock--exception_rules--custom_handled_exceptions"></a>
### Nested Schema for `exception_rules.custom_handled_exceptions`

Required:

- `custom_handled_exception` (Block Set, Min: 1) (see [below for nested schema](#nestedblock--exception_rules--custom_handled_exceptions--custom_handled_exception))

<a id="nestedblock--exception_rules--custom_handled_exceptions--custom_handled_exception"></a>
### Nested Schema for `exception_rules.custom_handled_exceptions.custom_handled_exception`

Optional:

- `class_pattern` (String) The pattern will match if it is contained within the actual class name.
- `message_pattern` (String) Optionally, define an exception message pattern. The pattern will match if the actual exception message contains the pattern.



<a id="nestedblock--exception_rules--ignored_exceptions"></a>
### Nested Schema for `exception_rules.ignored_exceptions`

Required:

- `custom_handled_exception` (Block Set, Min: 1) (see [below for nested schema](#nestedblock--exception_rules--ignored_exceptions--custom_handled_exception))

<a id="nestedblock--exception_rules--ignored_exceptions--custom_handled_exception"></a>
### Nested Schema for `exception_rules.ignored_exceptions.custom_handled_exception`

Optional:

- `class_pattern` (String) The pattern will match if it is contained within the actual class name.
- `message_pattern` (String) Optionally, define an exception message pattern. The pattern will match if the actual exception message contains the pattern.



<a id="nestedblock--exception_rules--success_forcing_exceptions"></a>
### Nested Schema for `exception_rules.success_forcing_exceptions`

Required:

- `custom_handled_exception` (Block Set, Min: 1) (see [below for nested schema](#nestedblock--exception_rules--success_forcing_exceptions--custom_handled_exception))

<a id="nestedblock--exception_rules--success_forcing_exceptions--custom_handled_exception"></a>
### Nested Schema for `exception_rules.success_forcing_exceptions.custom_handled_exception`

Optional:

- `class_pattern` (String) The pattern will match if it is contained within the actual class name.
- `message_pattern` (String) Optionally, define an exception message pattern. The pattern will match if the actual exception message contains the pattern.
 