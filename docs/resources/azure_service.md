---
layout: ""
page_title: dynatrace_azure_service Resource - terraform-provider-dynatrace"
description: |-
  The resource `dynatrace_azure_service` covers configuration of Supported Services for Azure credentials
---

# dynatrace_azure_service (Resource)

-> This resource is excluded by default in the export utility.

-> This resource requires the API token scopes **Read configuration** (`ReadConfig`) and **Write configuration** (`WriteConfig`)

## Dynatrace Documentation

- Microsoft Azure monitoring - https://www.dynatrace.com/support/help/how-to-use-dynatrace/infrastructure-monitoring/cloud-platform-monitoring/microsoft-azure-services-monitoring

- Azure credentials API - https://www.dynatrace.com/support/help/dynatrace-api/configuration-api/azure-credentials-api

## Resource Example Usage

This example utilizes the data source `dynatrace_azure_supported_services` in order to query for a full list of all supported services.
The `for_each` loop within the resource `dynatrace_azure_service` configures each of these services to get utilized with the default metrics recommended by Dynatrace (`use_recommended_metrics`).

If you want to configure a different set of metrics for a specific service, a separate resource `dynatrace_azure_service` will be necessary for that. That allows you to configure the `metric` blocks according to your wishes.
Just be aware of the fact, that Dynatrace enforces for most services a recommended set of metrics. All of them need to be part of your configuration in order to end up with a non-empty plan.

```terraform
resource "dynatrace_azure_credentials" "TERRAFORM_SAMPLE" {
  active                       = false
  app_id                       = "ABCDE"
  auto_tagging                 = true
  directory_id                 = "ABCDE"
  label                        = "TERRAFORM_SAMPLE"
  key                          = "aaaa"
  monitor_only_tagged_entities = true

  monitor_only_tag_pairs {
    name  = "string"
    value = "string"
  }
}

data "dynatrace_azure_supported_services" "supported_services" {  
  except = [ "AZURE_STORAGE_ACCOUNT" ] # Dynatrace will complain in case this service is getting configured together with other services in the list
}

resource "dynatrace_azure_service" "TERRAFORM_SAMPLE_services" {
  for_each = data.dynatrace_azure_supported_services.supported_services.services
  credentials_id = dynatrace_azure_credentials.TERRAFORM_SAMPLE.id
  use_recommended_metrics = true
  name           = each.key
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `credentials_id` (String) the ID of the azure credentials this supported service belongs to

### Optional

- `metric` (Block Set) A list of metrics to be monitored for this service. Depending on the service Dynatrace insists on a set of recommended metrics to be configured for that service. If any of these recommended metrics is missing here, the Terraform Provider will automatically add them during `terraform apply`. This usually results in a non-empty plan, until all of the recommended metrics are present within your configuration. For services considered `built-in` by Dynatrace any metrics specified here will be ignored - Dynatrace enforces a fixed set of metrics for these services. (see [below for nested schema](#nestedblock--metric))
- `name` (String) The name of the supporting service.
- `use_recommended_metrics` (Boolean) If `true` Terraform will negotiate with the Dynatrace API about the recommended/enforced metrics to be applied. Any `metric` specified will be therefore ignored.

### Read-Only

- `built_in` (Boolean) This attribute is automatically set to `true` if Dynatrace considers the supporting service with the given name to be a built-in service
- `id` (String) The ID of this resource.
- `required_metrics` (String) Used internally by the Terraform Provider in order to remember the metrics enforced by Dynatrace

<a id="nestedblock--metric"></a>
### Nested Schema for `metric`

Required:

- `name` (String) the name of the metric of the supporting service

Optional:

- `dimensions` (Set of String) a list of metric's dimensions names
 