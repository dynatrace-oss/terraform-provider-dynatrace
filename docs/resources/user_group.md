---
layout: ""
page_title: dynatrace_user_group Resource - terraform-provider-dynatrace"
subcategory: "IAM"
description: |-
  The resource `dynatrace_user_group` covers configuration for user groups
---

# dynatrace_user_group (Resource)

-> This resource requires the cluster API token scope **Service Provider API** (`ServiceProviderAPI`)

## Dynatrace Documentation

- User management and SSO - https://www.dynatrace.com/support/help/how-to-use-dynatrace/user-management-and-sso

- User management API - https://www.dynatrace.com/support/help/dynatrace-api/account-management-api/user-management-api

## Prerequisites

The recommended way to configure the provider is via environment variables.
Please set `DYNATRACE_CLUSTER_URL` and `DYNATRACE_CLUSTER_API_TOKEN` to use this resource.

Alternatively, you can set the variables in the `provider` block - not recommended for production environments.
```terraform
provider "dynatrace" {
  dt_cluster_url = "https://####.######.#####"
  dt_cluster_api_token = "######.#########################################################################################"
}
```

## Export Example Usage

- `terraform-provider-dynatrace -export dynatrace_user_group` downloads all existing user groups

The full documentation of the export feature is available [here](https://registry.terraform.io/providers/dynatrace-oss/dynatrace/latest/docs/guides/export-v2).

## Resource Example Usage

```terraform
variable "cluster" {
  default = "<the-id-of-your-dynatrace-cluster>"
}

variable "environment" {
  default = "<the-id-of-an-environment-within-your-cluster"
}

resource "dynatrace_user_group" "terraform" {
  name        = "Anonymous"
  ldap_groups = ["Anonymous"]
}

resource "dynatrace_user" "terraform" {
  email      = "me@home.com"
  first_name = "John"
  groups     = [dynatrace_user_group.terraform.id]
  last_name  = "Doe"
  user_name  = "me@home.com"
}

resource "dynatrace_policy" "terraform_cluster" {
  name            = "terraform_cluster"
  cluster         = var.cluster
  statement_query = "ALLOW settings:objects:read, settings:schemas:read WHERE settings:schemaId = \"terraform-cluster\";"
}

resource "dynatrace_policy" "terraform_env" {
  name            = "terraform_env"
  environment     = var.environment
  statement_query = "ALLOW environment:roles:viewer;"
}

resource "dynatrace_policy_bindings" "terraform_cluster_binding" {
  cluster  = var.cluster
  group    = dynatrace_user_group.terraform.id
  policies = [dynatrace_policy.terraform_cluster.id]
}

resource "dynatrace_policy_bindings" "terraform_env_binding" {
  environment = var.environment
  group       = dynatrace_user_group.terraform.id
  policies    = [dynatrace_policy.terraform_env.id]
}
```
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the user group

### Optional

- `access_account` (Boolean) If `true`, then the group has the access account rights
- `cluster_admin` (Boolean) If `true`, then the group has the cluster administrator rights
- `ldap_groups` (Set of String) LDAP group names
- `manage_account` (Boolean) If `true`, then the group has the manage account rights
- `permissions` (Block List, Max: 1) Permissions for environments (see [below for nested schema](#nestedblock--permissions))
- `sso_groups` (Set of String) SSO group names. If defined it's used to map SSO group name to Dynatrace group name, otherwise mapping is done by group name

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--permissions"></a>
### Nested Schema for `permissions`

Required:

- `grant` (Block List, Min: 1) A permission granted to one or multiple environments (see [below for nested schema](#nestedblock--permissions--grant))

<a id="nestedblock--permissions--grant"></a>
### Nested Schema for `permissions.grant`

Required:

- `permission` (String) The permission. Possible values are `VIEWER`, `MANAGE_SETTINGS`, `AGENT_INSTALL`, `LOG_VIEWER`, `VIEW_SENSITIVE_REQUEST_DATA`, `CONFIGURE_REQUEST_CAPTURE_DATA`, `REPLAY_SESSION_DATA`, `REPLAY_SESSION_DATA_WITHOUT_MASKING`, `MANAGE_SECURITY_PROBLEMS` and `MANAGE_SUPPORT_TICKETS`.

Optional:

- `environments` (Set of String) The ids of the environments this permission grants the user access to.
 