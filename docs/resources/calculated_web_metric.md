---
layout: ""
page_title: "dynatrace_calculated_web_metric Resource - terraform-provider-dynatrace"
subcategory: "Web Applications"
description: |-
  The resource `dynatrace_calculated_web_metric` covers configuration for calculated web app metrics
---

# dynatrace_calculated_web_metric (Resource)

-> This resource requires the API token scopes **Read configuration** (`ReadConfig`) and **Write configuration** (`WriteConfig`)

## Dynatrace Documentation

- Create calculated metrics for web applications - https://www.dynatrace.com/support/help/platform-modules/digital-experience/web-applications/additional-configuration/rum-calculated-metrics-web

- Web application metrics API - https://www.dynatrace.com/support/help/dynatrace-api/configuration-api/calculated-metrics/rum-metrics

## Export Example Usage

- `terraform-provider-dynatrace -export dynatrace_calculated_web_metric` downloads all existing calculated web app metric configuration

The full documentation of the export feature is available [here](https://dt-url.net/h203qmc).

## Resource Example Usage

```terraform
resource "dynatrace_calculated_web_metric" "#name#" {
  name           = "#name#"
  enabled        = true
  app_identifier = "APPLICATION-EA7C4B59F27D43EB"
  metric_key     = "calc:apps.web.#name#"
  dimensions {
    dimension {
      dimension    = "StringProperty"
      property_key = "web_utm_campaign"
      top_x        = 10
    }
  }
  metric_definition {
    metric = "VisuallyComplete"
  }
  user_action_filter {
    continent                         = "GEOLOCATION-970B6D0A98F55995"
    target_view_group_name_match_type = "Equals"
    target_view_name_match_type       = "Equals"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `app_identifier` (String) The Dynatrace entity ID of the application to which the metric belongs.
- `enabled` (Boolean) The metric is enabled (`true`) or disabled (`false`)
- `metric_definition` (Block List, Min: 1, Max: 1) The definition of a calculated web metric. (see [below for nested schema](#nestedblock--metric_definition))
- `metric_key` (String) The unique key of the calculated web metric.
- `name` (String) The displayed name of the metric.

### Optional

- `description` (String) Descriptor of a calculated web metric.
- `dimensions` (Block List) Parameters of a definition of a calculated web metric. (see [below for nested schema](#nestedblock--dimensions))
- `user_action_filter` (Block List, Max: 1) Parameters of a definition of a calculated web metric. (see [below for nested schema](#nestedblock--user_action_filter))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--metric_definition"></a>
### Nested Schema for `metric_definition`

Required:

- `metric` (String) The metric to be captured. Possible values are `Apdex`, `ApplicationCache`, `Callback`, `CumulativeLayoutShift`, `DNSLookup`, `DOMComplete`, `DOMContentLoaded`, `DOMInteractive`, `DoubleProperty`, `ErrorCount`, `FirstContentfulPaint`, `FirstInputDelay`, `FirstInputStart`, `FirstPaint`, `HTMLDownloaded`, `LargestContentfulPaint`, `LoadEventEnd`, `LoadEventStart`, `LongProperty`, `LongTasksTime`, `NavigationStart`, `OnDOMContentLoaded`, `OnLoad`, `Processing`, `RedirectTime`, `Request`, `RequestStart`, `Response`, `SecureConnect`, `SpeedIndex`, `TCPConnect`, `TimeToFirstByte`, `UserActionDuration`, `VisuallyComplete`

Optional:

- `property_key` (String) The key of the user action property. Only applicable for DoubleProperty and LongProperty metrics.


<a id="nestedblock--dimensions"></a>
### Nested Schema for `dimensions`

Optional:

- `dimension` (Block List) A dimensions for the metric usage (see [below for nested schema](#nestedblock--dimensions--dimension))

<a id="nestedblock--dimensions--dimension"></a>
### Nested Schema for `dimensions.dimension`

Required:

- `dimension` (String) The dimension of the metric. Possible values are `ApdexType`, `Browser`, `ErrorContext`, `ErrorOrigin`, `ErrorType`, `GeoLocation`, `StringProperty`, `UserActionType`
- `top_x` (Number) The number of top values to be calculated

Optional:

- `property_key` (String) The key of the user action property. Only applicable for the StringProperty dimension.



<a id="nestedblock--user_action_filter"></a>
### Nested Schema for `user_action_filter`

Optional:

- `action_duration_from_milliseconds` (Number) Only actions with a duration more than or equal to this value (in milliseconds) are included in the metric calculation.
- `action_duration_to_milliseconds` (Number) Only actions with a duration less than or equal to this value (in milliseconds) are included in the metric calculation.
- `apdex` (String) Only actions with the specified Apdex score are included in the metric calculation. Possible values: [ Frustrated, Satisfied, Tolerating, Unknown ]
- `browser_family` (String) Only user actions coming from the specified browser family are included in the metric calculation.
- `browser_type` (String) Only user actions coming from the specified browser type are included in the metric calculation.
- `browser_version` (String) Only user actions coming from the specified browser version are included in the metric calculation.
- `city` (String) Only actions of users from this city are included in the metric calculation. Specify geolocation ID here.
- `continent` (String) Only actions of users from this continent are included in the metric calculation. Specify geolocation ID here.
- `country` (String) Only actions of users from this country are included in the metric calculation. Specify geolocation ID here.
- `custom_action` (Boolean) The status of custom actions in the metric calculation: `true` or `false`
- `custom_error_name` (String) The custom error name of the actions to be included in the metric calculation.
- `custom_error_type` (String) The custom error type of the actions to be included in the metric calculation.
- `domain` (String) Only user actions coming from the specified domain are included in the metric calculation.
- `has_any_error` (Boolean) The error status of the actions to be included in the metric calculation: `true` or `false`
- `has_custom_errors` (Boolean) The custom error status of the actions to be included in the metric calculation: `true` or `false`
- `has_http_errors` (Boolean) The request error status of the actions to be included in the metric calculation: `true` or `false`
- `has_javascript_errors` (Boolean) The JavaScript error status of the actions to be included in the metric calculation: `true` or `false`
- `http_error_code` (Number) The HTTP error status code of the actions to be included in the metric calculation.
- `http_error_code_to` (Number) Can be used in combination with httpErrorCode to define a range of error codes that will be included in the metric calculation.
- `http_path` (String) The request path that has been determined to be the origin of an HTTP error of the actions to be included in the metric calculation.
- `ip` (String) Only actions coming from this IP address are included in the metric calculation.
- `ip_v6_traffic` (Boolean) The IPv6 status of the actions to be included in the metric calculation: `true` or `false`
- `load_action` (Boolean) The status of load actions in the metric calculation: `true` or `false`
- `os_family` (String) Only actions coming from this OS family are included in the metric calculation.
- `os_version` (String) Only actions coming from this OS version are included in the metric calculation.
- `real_user` (Boolean) The status of actions coming from real users in the metric calculation: `true` or `false`
- `region` (String) Only actions of users from this region are included in the metric calculation. Specify geolocation ID here.
- `robot` (Boolean) The status of actions coming from robots in the metric calculation: `true` or `false`
- `synthetic` (Boolean) The status of actions coming from synthetic monitors in the metric calculation: `true` or `false`
- `target_view_group` (String) Only actions on the specified group of views are included in the metric calculation.
- `target_view_group_name_match_type` (String) Specifies the match type of the view group filter, e.g. using Contains or Equals. Defaults to Equals.
- `target_view_name` (String) Only actions on the specified view are included in the metric calculation.
- `target_view_name_match_type` (String) Specifies the match type of the view name filter, e.g. using Contains or Equals. Defaults to Equals.
- `user_action_name` (String) Only actions with this name are included in the metric calculation.
- `user_action_properties` (Block Set) The definition of a calculated web metric. (see [below for nested schema](#nestedblock--user_action_filter--user_action_properties))
- `xhr_action` (Boolean) The status of xhr actions in the metric calculation: `true` or `false`
- `xhr_route_change_action` (Boolean) The status of route actions in the metric calculation: `true` or `false`

<a id="nestedblock--user_action_filter--user_action_properties"></a>
### Nested Schema for `user_action_filter.user_action_properties`

Optional:

- `property` (Block Set) User Action Property (see [below for nested schema](#nestedblock--user_action_filter--user_action_properties--property))

<a id="nestedblock--user_action_filter--user_action_properties--property"></a>
### Nested Schema for `user_action_filter.user_action_properties.property`

Optional:

- `from` (Number) Only actions that have a value greater than or equal to this are included in the metric calculation.
- `key` (String) The key of the action property we're checking.
- `match_type` (String) Specifies the match type of a string filter, e.g. using Contains or Equals.
- `to` (Number) Only actions that have a value less than or equal to this are included in the metric calculation.
- `value` (String) Only actions that have this value in the specified property are included in the metric calculation.
 