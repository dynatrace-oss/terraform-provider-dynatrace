---
layout: ""
page_title: dynatrace_vmware_anomalies Resource - terraform-provider-dynatrace"
subcategory: "Anomaly Detection"
description: |-
  The resource `dynatrace_vmware_anomalies` covers configuration for VMware anomaly detection
---

# dynatrace_vmware_anomalies (Resource)

-> This resource requires the API token scopes **Read settings** (`settings.read`) and **Write settings** (`settings.write`)

## Dynatrace Documentation

- Adjust the sensitivity of anomaly detection for infrastructure - https://www.dynatrace.com/support/help/platform/davis-ai/anomaly-detection/adjust-sensitivity-anomaly-detection/adjust-sensitivity-infastructure

- Settings API - https://www.dynatrace.com/support/help/dynatrace-api/environment-api/settings (schemaId: `builtin:anomaly-detection.infrastructure-vmware`)

## Export Example Usage

- `terraform-provider-dynatrace -export dynatrace_vmware_anomalies` downloads all existing VMware anomaly detection configuration

The full documentation of the export feature is available [here](https://registry.terraform.io/providers/dynatrace-oss/dynatrace/latest/docs/guides/export-v2).

## Resource Example Usage

```terraform
resource "dynatrace_vmware_anomalies" "#name#" {
  dropped_packets_detection {
    enabled        = true
    detection_mode = "custom"
    custom_thresholds {
      dropped_packets_per_second = 4
    }
  }
  esxi_high_cpu_detection {
    enabled = false
  }
  esxi_high_memory_detection {
    enabled        = true
    detection_mode = "custom"
    custom_thresholds {
      compression_decompression_rate = 104
    }
  }
  guest_cpu_limit_detection {
    enabled        = true
    detection_mode = "custom"
    custom_thresholds {
      host_cpu_usage_percentage = 74
      vm_cpu_ready_percentage   = 13
      vm_cpu_usage_percentage   = 94
    }
  }
  low_datastore_space_detection {
    enabled = false
  }
  overloaded_storage_detection {
    enabled        = true
    detection_mode = "custom"
    custom_thresholds {
      command_aborts_number = 4
    }
  }
  slow_physical_storage_detection {
    enabled        = true
    detection_mode = "custom"
    custom_thresholds {
      avg_read_write_latency  = 204
      peak_read_write_latency = 304
    }
  }
  undersized_storage_detection {
    enabled = false
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `dropped_packets_detection` (Block List, Min: 1, Max: 1) no documentation available (see [below for nested schema](#nestedblock--dropped_packets_detection))
- `esxi_high_cpu_detection` (Block List, Min: 1, Max: 1) no documentation available (see [below for nested schema](#nestedblock--esxi_high_cpu_detection))
- `esxi_high_memory_detection` (Block List, Min: 1, Max: 1) no documentation available (see [below for nested schema](#nestedblock--esxi_high_memory_detection))
- `guest_cpu_limit_detection` (Block List, Min: 1, Max: 1) no documentation available (see [below for nested schema](#nestedblock--guest_cpu_limit_detection))
- `low_datastore_space_detection` (Block List, Min: 1, Max: 1) no documentation available (see [below for nested schema](#nestedblock--low_datastore_space_detection))
- `overloaded_storage_detection` (Block List, Min: 1, Max: 1) no documentation available (see [below for nested schema](#nestedblock--overloaded_storage_detection))
- `slow_physical_storage_detection` (Block List, Min: 1, Max: 1) no documentation available (see [below for nested schema](#nestedblock--slow_physical_storage_detection))
- `undersized_storage_detection` (Block List, Min: 1, Max: 1) no documentation available (see [below for nested schema](#nestedblock--undersized_storage_detection))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--dropped_packets_detection"></a>
### Nested Schema for `dropped_packets_detection`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `custom_thresholds` (Block List, Max: 1) Alert if the condition is met in 3 out of 5 samples (see [below for nested schema](#nestedblock--dropped_packets_detection--custom_thresholds))
- `detection_mode` (String) Possible Values: `Auto`, `Custom`

<a id="nestedblock--dropped_packets_detection--custom_thresholds"></a>
### Nested Schema for `dropped_packets_detection.custom_thresholds`

Required:

- `dropped_packets_per_second` (Number) Receive/transmit dropped packets rate on NIC is higher than



<a id="nestedblock--esxi_high_cpu_detection"></a>
### Nested Schema for `esxi_high_cpu_detection`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `custom_thresholds` (Block List, Max: 1) Alert if **all three** conditions are met in 3 out of 5 samples (see [below for nested schema](#nestedblock--esxi_high_cpu_detection--custom_thresholds))
- `detection_mode` (String) Possible Values: `Auto`, `Custom`

<a id="nestedblock--esxi_high_cpu_detection--custom_thresholds"></a>
### Nested Schema for `esxi_high_cpu_detection.custom_thresholds`

Required:

- `cpu_peak_percentage` (Number) At least one peak occurred when Hypervisor CPU usage was higher than
- `cpu_usage_percentage` (Number) CPU usage is higher than
- `vm_cpu_ready_percentage` (Number) VM CPU ready is higher than



<a id="nestedblock--esxi_high_memory_detection"></a>
### Nested Schema for `esxi_high_memory_detection`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `custom_thresholds` (Block List, Max: 1) Alert if the condition is met in 3 out of 5 samples (see [below for nested schema](#nestedblock--esxi_high_memory_detection--custom_thresholds))
- `detection_mode` (String) Possible Values: `Auto`, `Custom`

<a id="nestedblock--esxi_high_memory_detection--custom_thresholds"></a>
### Nested Schema for `esxi_high_memory_detection.custom_thresholds`

Required:

- `compression_decompression_rate` (Number) ESXi host swap IN/OUT or compression/decompression rate is higher than



<a id="nestedblock--guest_cpu_limit_detection"></a>
### Nested Schema for `guest_cpu_limit_detection`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `custom_thresholds` (Block List, Max: 1) Alert if **all three** conditions are met in 3 out of 5 samples (see [below for nested schema](#nestedblock--guest_cpu_limit_detection--custom_thresholds))
- `detection_mode` (String) Possible Values: `Auto`, `Custom`

<a id="nestedblock--guest_cpu_limit_detection--custom_thresholds"></a>
### Nested Schema for `guest_cpu_limit_detection.custom_thresholds`

Required:

- `host_cpu_usage_percentage` (Number) Hypervisor CPU usage is higher than
- `vm_cpu_ready_percentage` (Number) VM CPU ready is higher than
- `vm_cpu_usage_percentage` (Number) VM CPU usage (VM CPU Usage Mhz / VM CPU limit in Mhz) is higher than



<a id="nestedblock--low_datastore_space_detection"></a>
### Nested Schema for `low_datastore_space_detection`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `custom_thresholds` (Block List, Max: 1) Alert if the condition is met in 1 out of 5 samples (see [below for nested schema](#nestedblock--low_datastore_space_detection--custom_thresholds))
- `detection_mode` (String) Possible Values: `Auto`, `Custom`

<a id="nestedblock--low_datastore_space_detection--custom_thresholds"></a>
### Nested Schema for `low_datastore_space_detection.custom_thresholds`

Required:

- `free_space_percentage` (Number) Datastore free space is lower than



<a id="nestedblock--overloaded_storage_detection"></a>
### Nested Schema for `overloaded_storage_detection`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `custom_thresholds` (Block List, Max: 1) Alert if the condition is met in 3 out of 5 samples (see [below for nested schema](#nestedblock--overloaded_storage_detection--custom_thresholds))
- `detection_mode` (String) Possible Values: `Auto`, `Custom`

<a id="nestedblock--overloaded_storage_detection--custom_thresholds"></a>
### Nested Schema for `overloaded_storage_detection.custom_thresholds`

Required:

- `command_aborts_number` (Number) Number of command aborts is higher than



<a id="nestedblock--slow_physical_storage_detection"></a>
### Nested Schema for `slow_physical_storage_detection`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `custom_thresholds` (Block List, Max: 1) Alert if **any** condition is met in 4 out of 5 samples (see [below for nested schema](#nestedblock--slow_physical_storage_detection--custom_thresholds))
- `detection_mode` (String) Possible Values: `Auto`, `Custom`

<a id="nestedblock--slow_physical_storage_detection--custom_thresholds"></a>
### Nested Schema for `slow_physical_storage_detection.custom_thresholds`

Required:

- `avg_read_write_latency` (Number) Read/write latency is higher than
- `peak_read_write_latency` (Number) Peak value for read/write latency is higher than



<a id="nestedblock--undersized_storage_detection"></a>
### Nested Schema for `undersized_storage_detection`

Required:

- `enabled` (Boolean) This setting is enabled (`true`) or disabled (`false`)

Optional:

- `custom_thresholds` (Block List, Max: 1) Alert if **any** condition is met in 3 out of 5 samples (see [below for nested schema](#nestedblock--undersized_storage_detection--custom_thresholds))
- `detection_mode` (String) Possible Values: `Auto`, `Custom`

<a id="nestedblock--undersized_storage_detection--custom_thresholds"></a>
### Nested Schema for `undersized_storage_detection.custom_thresholds`

Required:

- `average_queue_command_latency` (Number) Average queue command latency is higher than
- `peak_queue_command_latency` (Number) Peak queue command latency is higher than
 