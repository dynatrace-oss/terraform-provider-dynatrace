---
page_title: "dynatrace_dql Data Source - terraform-provider-dynatrace"
subcategory: "Live Data"
description: |-
  The data source `dynatrace_dql` allows for executing DQL queries. See detailed information about the [Dynatrace Query Language](https://docs.dynatrace.com/docs/discover-dynatrace/references/dynatrace-query-language) within the Dynatrace Documentation.
---

# dynatrace_dql (Data Source)

The `dynatrace_dql` data source requires authentication via OAuth Client (`DT_CLIENT` and `DT_CLIENT_SECRET`).
It depends on the query you want to execute what permissions are required in details. For more information look into [https://docs.dynatrace.com/docs/discover-dynatrace/platform/grail/data-model/assign-permissions-in-grail#grail-permissions-table](Permissions in Grail â€” Dynatrace Docs).

The only required attribute is the `query` attribute - holding the DQL query.
You may or may not utilize the additional attributes in order to narrow down the results. But most of that can also get achieved with in the DQL query itself.

The result of the query will be available within the attribute `results` in JSON format - usually an array of records.
The schema behind these results can, of course, vary depending on the DQL query you're executing.

Terraform will attempt to poll for results until the query has finished. There is no need to specify a timeout for that.

!> Executing DQL queries can inflict additional costs in Dynatrace. Be aware of that fact when using this Data Source. Terraform will run that query by default every time you're executing `terraform plan` or `terraform apply`.

## Example Usage
```terraform
data "dynatrace_dql" "this" {
  query = "fetch events"
}
```
will produce content for the `results` attribute like this:
```
[
    {
        "event.id"                             = "-7629786693326919096_1745910027748"
        "Event source"                         = "OS services monitoring"
        ...
        timestamp                              = "2025-04-29T07:00:44.416000000Z"
    },
    {
        ...
    },
    ...
]
```

You can also use Heredoc syntax for better readability of complex DQL queries.

```terraform
data "dynatrace_dql" "this" {
  query = <<EOT
    fetch events |
    filter event.type == "davis" AND davis.status != "CLOSED" |
    fields timestamp, davis.title, davis.underMaintenance, davis.status |
    sort timestamp |
    limit 10  
EOT
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `query` (String) example: fetch events | filter event.type == "davis" AND davis.status != "CLOSED" | fields timestamp, davis.title, davis.underMaintenance, davis.status | sort timestamp | limit 10

### Optional

- `default_sampling_ratio` (Number) In case not specified in the DQL string, the sampling ratio defined here is applied. Note that this is only applicable to log queries
- `default_scan_limit_gbytes` (Number) Limit in gigabytes for the amount data that will be scanned during read
- `default_timeframe_end` (String) The query timeframe 'end' timestamp in ISO-8601 or RFC3339 format. If the timeframe 'start' parameter is missing, the whole timeframe is ignored. Note that if a timeframe is specified within the query string (query) then it has precedence over this query request parameter
- `default_timeframe_start` (String) The query timeframe 'start' timestamp in ISO-8601 or RFC3339 format. If the timeframe 'end' parameter is missing, the whole timeframe is ignored. Note that if a timeframe is specified within the query string (query) then it has precedence over this query request parameter
- `fetch_timeout_seconds` (Number) The query will stop reading data after reaching the fetch-timeout. The query execution will continue, providing a partial result based on the read data
- `locale` (String) The query locale. If none specified, then a language/country neutral locale is chosen. The input values take the ISO-639 Language code with an optional ISO-3166 country code appended to it with an underscore. For instance, both values are valid 'en' or 'en_US'
- `max_result_bytes` (Number) The maximum number of result bytes that this query will return
- `max_result_records` (Number) The maximum number of result records that this query will return
- `timezone` (String) The query timezone. If none is specified, UTC is used as fallback. The list of valid input values matches that of the IANA Time Zone Database (TZDB). It accepts values in their canonical names like 'Europe/Paris', the abbreviated version like CET or the UTC offset format like '+01:00'

### Read-Only

- `id` (String) The ID of this resource.
- `records` (String)